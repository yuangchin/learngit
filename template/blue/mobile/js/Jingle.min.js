var Jingle=J={version:"0.41",$:window.Zepto,settings:{appType:"single",transitionType:"slide",transitionTime:250,transitionTimingFunc:"ease-in",toastDuration:2e3,showWelcome:!1,welcomeSlideChange:null,showPageLoading:!1,basePagePath:"html/",basePageSuffix:".html",remotePage:{}},mode:window.innerWidth<800?"phone":"tablet",hasTouch:"ontouchstart"in window,launchCompleted:!1,hasMenuOpen:!1,hasPopupOpen:!1,isWebApp:"http:"==location.protocol,launch:function(a){$.extend(this.settings,a);var b=window.localStorage.getItem("hasShowWelcome");!b&&this.settings.showWelcome&&this.Welcome.show(),this.Element.init(),this.Router.init(),this.Menu.init()}};J.Element=function(a){var b={icon:"[data-icon]",scroll:'[data-scroll="true"]',toggle:".toggle",range:"[data-rangeinput]",progress:"[data-progress]",count:"[data-count]",checkbox:"[data-checkbox]"},c=function(c){c||a(document).on("articleshow","article",function(){J.Element.scroll(this)});var e=a(c||"body");0!=e.length&&(a.map(d(e,b.icon),f),a.map(d(e,b.toggle),g),a.map(d(e,b.range),h),a.map(d(e,b.progress),i),a.map(d(e,b.count),j),a.map(d(e,b.checkbox),k),e=null)},d=function(a,b){return a.find(b).add(a.filter(b))},e=function(c){a.map(d(a(c),b.scroll),function(a){setTimeout(function(){J.Scroll(a)},100)})},f=function(b){var c=a(b),d=c.children("i.icon"),e=c.data("icon");d.length>0?d.attr("class","icon "+e):c.prepend('<i class="icon '+e+'"></i>')},g=function(b){var d,c=a(b);c.find("div.toggle-handle").length>0||(d=c.attr("name"),d&&c.append('<input style="display: none;" name="'+d+'" value="'+c.hasClass("active")+'"/>'),c.append('<div class="toggle-handle"></div>'),c.click(function(){var b=a(this),c=!b.hasClass("active");b.toggleClass("active").trigger("toggle",[c]),b.find("input").val(c)}))},h=function(b){var d,h,i,c=a(b),e=a('input[type="range"]',b),f=c.data("rangeinput"),g=a('<input type="number" name="test" value="'+e.val()+'"/>');d="left"==f?g.prependTo(c):g.appendTo(c),h=parseInt(e.attr("max"),10),i=parseInt(e.attr("min"),10),e.change(function(){d.val(e.val())}),d.on("input",function(){var a=parseInt(d.val(),10);a=a>h?h:i>a?i:a,e.val(a),d.val(a)})},i=function(b){var c=a(b),e=parseFloat(c.data("progress"))+"%",f=c.data("title")||"",d=c.find("div.bar");0==d.length&&(d=a('<div class="bar"></div>').appendTo(c)),d.width(e).text(f+e),"100%"==e&&d.css("border-radius","10px")},j=function(b){var c=a(b),d=c.find("span.count"),e=parseInt(c.data("count")),f=c.data("orient"),g="left"==f?"left":"";d.length>0?d.text(e).show():d=a('<span class="count '+g+'">'+e+"</span>").appendTo(c),0==e&&d.hide()},k=function(b){var c=a(b),d=c.data("checkbox");c.find("i.icon").length>0||(c.prepend('<i class="icon checkbox-'+d+'"></i>'),c.on("click",function(){var a="checked"==c.data("checkbox")?"unchecked":"checked";c.data("checkbox",a).find("i.icon").attr("class","icon checkbox-"+a),c.trigger("change")}))};return{init:c,icon:f,toggle:g,progress:i,range:h,badge:j,scroll:e}}(J.$),J.Menu=function(a){var b,c,d,e=function(){b=a("#aside_container"),c=a("#section_container"),d=a('<div id="section_container_mask"></div>').appendTo("#section_container"),d.on("click",g),b.on("swipeRight","aside",function(){"right"==a(this).data("position")&&g()}),b.on("swipeLeft","aside",function(){"right"!=a(this).data("position")&&g()}),b.on("click",".aside-close",g)},f=function(b){var d=a(b).addClass("active"),e=d.data("transition"),f=d.data("position")||"left",g=d.data("show-close"),h=d.width(),i="left"==f?h+"px":"-"+h+"px";g&&0==d.find("div.aside-close").length&&d.append('<div class="aside-close icon close"></div>'),J.Element.scroll(d),"overlay"==e?J.anim(d,{translateX:"0%"}):"reveal"==e?J.anim(c,{translateX:i}):(J.anim(d,{translateX:"0%"}),J.anim(c,{translateX:i})),a("#section_container_mask").show(),J.hasMenuOpen=!0},g=function(b,d){var e=a("#aside_container aside.active"),f=e.data("transition"),g=e.data("position")||"left",h="left"==g?"-100%":"100%",i=function(){e.removeClass("active"),J.hasMenuOpen=!1,d&&d.call(this)};"overlay"==f?J.anim(e,{translateX:h},b,i):"reveal"==f?J.anim(c,{translateX:"0"},b,i):(J.anim(e,{translateX:h},b),J.anim(c,{translateX:"0"},b,i)),a("#section_container_mask").hide()};return{init:e,show:f,hide:g}}(J.$),J.Page=function(a){var b=function(a){return 0==a.indexOf("#")?a.substr(1):a},c=function(c,d){var g,i,j,k,f={},h=!1;if("object"==a.type(c)&&(f=c.param,g=c.query,c=c.tag),i=a(c).data("query"),1==a(c).length){if(i==g)return d(),void 0;h=!0}j=b(c),k=J.settings.remotePage[c],k||(k=J.settings.basePagePath+j+J.settings.basePageSuffix),J.settings.showPageLoading&&J.showMask(),e(k,f,function(b){J.settings.showPageLoading&&J.hideMask(),a(c).remove();var e=a(b);a("#section_container").append(e),h&&e.addClass("active"),e.trigger("pageload").data("query",g),J.Element.init(c),d(),e=null})},d=function(b,c){var d=J.Util.parseHash(window.location.hash).param;e(b,d,function(b){a(c).html(b),J.Element.init(c)})},e=function(b,c,d){return a.ajax({url:b,timeout:2e4,data:c,success:function(a){d&&d(a)}})};return{load:c,loadSection:d,loadContent:e}}(J.$),J.Router=function(a){var b=[],c=function(){a(window).on("popstate",e),a(document).on("click","a",function(b){var c=a(this).data("target"),d=a(this).attr("href");return!d||d.match(/^#/)||c?(b.preventDefault(),!1):void 0}),a(document).on("click","a[data-target]",f),d()},d=function(){var b=location.hash,c=a("#section_container section").first(),d="#"+c.attr("id");j(d,!0),""!=b&&b!=d?g(b):c.trigger("pageinit").trigger("pageshow").data("init",!0).find("article.active").trigger("articleshow")},e=function(a){if(a.state&&a.state.hash){var c=a.state.hash;b[1]&&c===b[1].hash&&(J.hasMenuOpen&&J.Menu.hide(),J.hasPopupOpen&&J.Popup.close(),h())}},f=function(){var b=a(this),c=b.attr("data-target"),d=b.attr("href");switch(c){case"section":"single"==J.settings.appType&&g(d);break;case"article":case"element":k(d,b);break;case"menu":l(d);break;case"back":window.history.go(-1)}return!1},g=function(c){var d,e;return J.hasMenuOpen?(J.Menu.hide(200,function(){g(c)}),void 0):(d=J.Util.parseHash(c),e=b[0],e.hash!==d.hash&&J.Page.load(d,function(){var b=e.tag==d.tag;b?a(e.tag).trigger("pageshow").find("article.active").trigger("articlehide"):i(e.tag,d.tag),j(c,b)}),void 0)},h=function(){"single"==J.settings.appType&&i(b.shift().tag,b[0].tag,!0)},i=function(a,b,c){J.Transition.run(a,b,c)},j=function(a,c){var d=J.Util.parseHash(a);c?(b.shift(d),window.history.replaceState(d,"",a)):window.history.pushState(d,"",a),b.unshift(d)},k=function(b,c){var e,d=a(b);d.hasClass("active")||(c&&c.addClass("active").siblings(".active").removeClass("active"),d.is("article")?(e=d.addClass("active").siblings(".active").removeClass("active"),d.trigger("articleshow"),e.trigger("articlehide")):d.show().siblings(".element").hide())},l=function(a){J.hasMenuOpen?J.Menu.hide():J.Menu.show(a)};return{init:c,goTo:g,showArticle:k,back:h}}(J.$),J.Service=function(a){function n(b,c,d,e){var f=!a.isFunction(c);return{url:b,data:f?c:void 0,success:f?a.isFunction(d)?d:void 0:c,dataType:f?e||d:d}}var b="JINGLE_POST_DATA",c="JINGLE_GET_",d=function(a){"post"==a.type?e(a):f(a)},e=function(b){J.offline?(i(b.url,b.data),b.success("数据已存至本地")):a.ajax(b)},f=function(b){var d,e,c=b.url+JSON.stringify(b.data);J.offline?(d=g(c),d?b.success(d.data,c,d.cacheTime):b.success(d)):(e=b.success,b.success=function(a){h(c,a),e(a,c)},a.ajax(b))},g=function(a){return JSON.parse(window.localStorage.getItem(c+a))},h=function(a,b){var d={data:b,cacheTime:new Date};window.localStorage.setItem(c+a,JSON.stringify(d))},i=function(a,c){var d=j();d=d||{},d[a]={data:c,createdTime:new Date},window.localStorage.setItem(b,JSON.stringify(d))},j=function(a){var c=JSON.parse(window.localStorage.getItem(b));return c&&a?c[a]:c},k=function(a){if(a){var c=j();delete c[a],window.localStorage.setItem(b,JSON.stringify(c))}else window.localStorage.removeItem(b)},l=function(b,c,d){var e=j(b).data;a.ajax({url:b,contentType:"application/json",data:e,type:"post",success:function(){c(b)},error:function(){d(b)}})},m=function(a,b){var d,c=j();for(d in c)l(d,a,b);k()},o=function(){return d(n.apply(null,arguments))},p=function(){var f=n.apply(null,arguments);return f.type="POST",d(f)},q=function(){var e=n.apply(null,arguments);return e.dataType="json",d(e)},r=function(){var e,f,a=window.localStorage,d=[];for(e=0;e<a.length;e++)f=a.key(e),0==f.indexOf(c)&&d.push(f);for(e=0;e<d.length;e++)a.removeItem(d[e]);a.removeItem(b)};return{ajax:d,get:o,post:p,getJSON:q,getUnPostData:j,removeUnPostData:k,syncPostData:l,syncAllPostData:m,getCacheData:g,saveCacheData:h,clear:r}}(J.$),J.Template=function(a){var b=function(b,c,d){var e='<div class="back-mask"><div class="icon '+d+'"></div><div>'+c+"</div></div>";a(b).html(e)},c=function(a){b(a,"没有找到相关数据","drawer")},d=function(a){b(a,"加载中...","cloud-download")},e=function(b,d,e,f){var h,g=a(b);f=f||"replace","array"==a.type(e)&&0==e.length?c(g):(h=template(d,e),"replace"==f?g.html(h):g.append(h),J.Element.init(h))};return{render:e,background:b,loading:d,no_result:c}}(J.$),J.Toast=function(a){var c,d,b="toast",e={toast:'<a href="#">{value}</a>',success:'<a href="#"><i class="icon icon-f058"></i>{value}</a>',error:'<a href="#"><i class="icon icon-f057"></i>{value}</a></div>',info:'<a href="#"><i class="icon icon-f05a"></i>{value}</a>'},f=function(){a("body").append('<div id="jingle_toast"></div>'),c=a("#jingle_toast"),i()},g=function(){J.anim(c,"scaleOut",function(){c.hide(),c.empty()})},h=function(a,f,h){d&&clearTimeout(d);var i=a.split(/\s/);b=i[0],c.attr("class",a).html(e[b].replace("{value}",f)).show(),J.anim(c,"scaleIn"),0!==h&&(d=setTimeout(g,h||J.settings.toastDuration))},i=function(){c.on("click",'[data-target="close"]',function(){g()})};return f(),{show:h,hide:g}}(J.$),J.Transition=function(a){var b,c,d,e,f={slide:[["slideLeftOut","slideLeftIn"],["slideRightOut","slideRightIn"]],cover:[["","slideLeftIn"],["slideRightOut",""]],slideUp:[["","slideUpIn"],["slideDownOut",""]],slideDown:[["","slideDownIn"],["slideUpOut",""]],popup:[["","scaleIn"],["scaleOut",""]]},g=function(){c.trigger("beforepagehide",[b]),d.trigger("beforepageshow",[b]);var a=e[0]||"empty",f=e[1]||"empty";c.bind("webkitAnimationEnd.jingle",h).addClass("anim "+a),d.addClass("anim animating "+f)},h=function(){c.off("webkitAnimationEnd.jingle"),d.off("webkitAnimationEnd.jingle"),c.attr("class",""),d.attr("class","active"),!d.data("init")&&d.trigger("pageinit").data("init",!0),!c.data("init")&&c.trigger("pageinit").data("init",!0),c.trigger("pagehide",[b]),d.trigger("pageshow",[b]),c.find("article.active").trigger("articlehide"),d.find("article.active").trigger("articleshow"),c=d=null},i=function(h,i,j){a(":focus").trigger("blur"),b=j,c=a(h),d=a(i);var k=b?c.attr("data-transition"):d.attr("data-transition");k=k||J.settings.transitionType,e=b?f[k][1]:f[k][0],g()},j=function(a,b,c,d,e){return f[a]?(console.error("该转场动画已经存在，请检查你自定义的动画名称(名称不能重复)"),void 0):(f[a]=[[b,c],[d,e]],void 0)};return{run:i,add:j}}(J.$),J.Util=function(){var b=function(a){var c,f,g,h,d={},e=a.split("?"),b=e[0];if(e.length>1)for(c=e[1],f=c.split("&"),h=0;h<f.length;h++)f[h]&&(g=f[h].split("="),d[g[0]]=g[1]);return{hash:a,tag:b,query:c,param:d}},c=function(a,b){var d,c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b};return{parseHash:b,formatDate:c}}(J.$),J.Welcome=function(a){var b=function(){a.ajax({url:J.settings.basePagePath+"welcome.html",timeout:5e3,async:!1,success:function(b){a("body").append(b),new J.Slider({selector:"#jingle_welcome",onAfterSlide:J.settings.welcomeSlideChange})}})},c=function(){J.anim("#jingle_welcome","slideLeftOut",function(){a(this).remove(),window.localStorage.setItem("hasShowWelcome",!0)})};return{show:b,hide:c}}(J.$),function(a){J.anim=function(b,c){var g,h,i,k,l,m,j=arguments.length;for(k=2;j>k;k++)l=arguments[k],m=a.type(l),"number"==m?g=l:"string"==m?h=l:"function"==m?i=l:null;a(b).animate(c,g||J.settings.transitionTime,h||J.settings.transitionTimingFunc,i)},J.showMask=function(a){J.Popup.loading(a)},J.hideMask=function(){J.Popup.close(!0)},J.showToast=function(a,b,c){b=b||"toast",J.Toast.show(b,a,c)},J.hideToast=function(){J.Toast.hide()},J.alert=function(a,b){J.Popup.alert(a,b)},J.confirm=function(a,b,c,d){J.Popup.confirm(a,b,c,d)},J.popup=function(a){J.Popup.show(a)},J.closePopup=function(){J.Popup.close()},J.popover=function(a,b,c,d){J.Popup.popover(a,b,c,d)},J.tmpl=function(a,b,c,d){J.Template.render(a,b,c,d)}}(J.$),J.Popup=function(a){var b,c,d,e,f={top:{top:0,left:0,right:0},"top-second":{top:"44px",left:0,right:0},center:{top:"50%",left:"5%",right:"5%","border-radius":"3px"},bottom:{bottom:0,left:0,right:0},"bottom-second":{bottom:"51px",left:0,right:0}},g={top:["slideDownIn","slideUpOut"],bottom:["slideUpIn","slideDownOut"],defaultAnim:["bounceIn","bounceOut"]},h={alert:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a data-target="closePopup" data-icon="icon-e603">{ok}</a></div>',confirm:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a class="cancel" data-icon="close">{cancel}</a><a data-icon="icon-e603">{ok}</a></div>',loading:'<p><i class="icon icon-e982"></i>{title}</p>'},i=function(){a("body").append('<div id="jingle_popup"></div><div id="jingle_popup_mask"></div>'),b=a("#jingle_popup"),c=a("#jingle_popup_mask"),l()},j=function(h){var j,k,l,m,i={height:void 0,width:void 0,opacity:.3,url:null,tplId:null,tplData:null,html:"",pos:"center",clickMask2Close:!0,showCloseBtn:!0,arrowDirection:void 0,animation:!0,timingFunc:"linear",duration:200,onShow:void 0};if(a.extend(i,h),e=i.clickMask2Close,b.attr({style:"","class":""}),i.width&&b.width(i.width),i.height&&b.height(i.height),j=a.type(i.pos),"object"==j)b.css(i.pos),d=g["defaultAnim"];else{if("string"!=j)return console.error("错误的参数！"),void 0;f[i.pos]?(b.css(f[i.pos]),k=i.pos.indexOf("top")>-1?"top":i.pos.indexOf("bottom")>-1?"bottom":"defaultAnim",d=g[k]):(b.addClass(i.pos),d=g["defaultAnim"])}c.css("opacity",i.opacity),c.show(),i.html?l=i.html:i.url?l=J.Page.loadContent(i.url):i.tplId?l=template(i.tplId,i.tplData):i.elId&&(b[0].title=i.elId,l=a("#"+i.elId).show()),i.showCloseBtn&&!b[0].title&&(l+='<div id="tag_close_popup" data-target="closePopup" class="icon-e606"></div>'),i.arrowDirection&&(b.addClass("arrow "+i.arrowDirection),b.css("padding","8px"),("top"==i.arrowDirection||"bottom"==i.arrowDirection)&&(d=g[i.arrowDirection])),b.html(l).show(),b[0].title&&b.append('<div id="tag_close_popup" data-target="closePopup" class="icon-e606"></div>'),J.Element.init(b),i.onShow&&i.onShow.call(b),"center"==i.pos&&(m=b.height(),b.css("margin-top","-"+m/2+"px")),i.animation&&J.anim(b,d[0],i.duration,i.timingFunc),J.hasPopupOpen=!0},k=function(e){c.hide(),d&&!e?J.anim(b,d[1],200,function(){b[0].title&&a("body").append(b.find("#"+b[0].title).hide()),b.hide().empty(),J.hasPopupOpen=!1}):(b[0].title&&a("body").append(b.find("#"+b[0].title).hide()),b.hide().empty(),J.hasPopupOpen=!1)},l=function(){c.on("click",function(a){e&&k(),a.stopPropagation()}),b.on("click",'[data-target="closePopup"]',function(){k()})},m=function(a,b,c){var d=h.alert.replace("{title}",a).replace("{content}",b).replace("{ok}",c||"确定");j({html:d,pos:"center",clickMask2Close:!1,showCloseBtn:!1})},n=function(b,c,d,e){var f=h.confirm.replace("{title}",b).replace("{content}",c).replace("{cancel}","取消").replace("{ok}","确定");j({html:f,pos:"center",clickMask2Close:!1,showCloseBtn:!1}),a('#popup_btn_container [data-icon="icon-e603"]').click(function(){k(),d.call(this)}),a('#popup_btn_container [data-icon="close"]').click(function(){k(),e.call(this)})},o=function(a,b,c,d){j({html:a,pos:b,showCloseBtn:!1,arrowDirection:c,onShow:d})},p=function(a){var b=h.loading.replace("{title}",a||"加载中...");j({html:b,pos:"loading",opacity:.1,animation:!0,clickMask2Close:!1})},q=function(b){var c='<div class="actionsheet">';a.each(b,function(a,b){c+='<button style="background-color: '+b.color+' !important;">'+b.text+"</button>"}),c+='<button class="alizarin">取消</button>',c+="</div>",j({html:c,pos:"bottom",showCloseBtn:!1,onShow:function(){a(this).find("button").each(function(c,d){a(d).on("click",function(){b[c]&&b[c].handler&&b[c].handler.call(d),k()})})}})};return i(),{show:j,close:k,alert:m,confirm:n,popover:o,loading:p,actionsheet:q}}(J.$),J.Selected=function(a){var b=100,c="[data-selected]",d=a.fn.trigger;a.fn.trigger=function(e){var h,i,f=a(this),g=arguments;return"click"!==e&&"click"!==e.type||!(i=f.closest(c).get(0))?(d.apply(f,g),this):(i=a(i),h=i.data("selected"),i.addClass(h),setTimeout(function(){i.removeClass(h),d.apply(f,g),f=i=null},b),this)}}(J.$),J.Cache=function(a){var b="_J_P_",c="_J_",d=function(a,b){var d={data:b,cacheTime:new Date};window.localStorage.setItem(c+a,JSON.stringify(d))},e=function(a){return JSON.parse(window.localStorage.getItem(c+a))},f=function(a,c){var d=g();d=d||{},d[a]={data:c,createdTime:new Date},window.localStorage.setItem(b,JSON.stringify(d))},g=function(a){var c=JSON.parse(window.localStorage.getItem(b));return c&&a?c[a]:c},h=function(a){if(a){var c=g();delete c[a],window.localStorage.setItem(b,JSON.stringify(c))}else window.localStorage.removeItem(b)},i=function(b,c,d){function j(b){var i=g(b).data;a.ajax({url:b,contentType:"application/json",data:i,type:"post",success:function(){f++,h(b),f==e&&c(b)},error:function(){d(b)}})}var e,i,f=0;if("string"==a.type(b))e=1,j(b);else{if(i=g(),!i)return;e=i.length;for(b in i)j(b)}},j=function(){var d,a=window.localStorage;for(d in a)0==d.indexOf(c)&&a.removeItem(d);a.removeItem(b)};return{get:e,save:d,getPost:g,savePost:f,removePost:h,syncPost:i,clear:j}}(J.$),function(a){var b=function(b,c){var g,h,i,j,k,l,d={months:["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],days:["日","一","二","三","四","五","六"],swipeable:!0,date:new Date,onRenderDay:void 0,onSelect:void 0},e=this,f=a(b),m=function(){e.settings=a.extend({},d,c),k=e.settings.date.getFullYear(),l=e.settings.date.getMonth(),j=new Date(k,l,e.settings.date.getDate()),p(),u()},n=function(a){return new Date(a.getFullYear(),a.getMonth(),1).getDay()},o=function(a){return new Date(a.getFullYear(),a.getMonth()+1,0).getDate()},p=function(){var b,a="";a+='<div class="jingle-calendar">',a+=q(k,l),a+=r(),a+='<div class="jingle-calendar-body">',a+=s(j),a+="</div></div>",f.html(a),b=f.find("span"),g=b.eq(0),h=b.eq(1),i=f.find(".jingle-calendar-body")},q=function(a,b){var c='<div class="jingle-calendar-nav">';return c+='<div> <i class="icon previous" data-year='+a+"></i><span>"+a+'</span><i class="icon next" data-year='+a+"></i></div>",c+='<div ><i class="icon previous" data-month='+b+"></i> <span>"+e.settings.months[b]+'</span><i class="icon next" data-month='+b+"></i></div>",c+="</div>"},r=function(){var b,a="<table><thead><tr>";for(b=0;7>b;b++)a+="<th>"+e.settings.days[b]+"</th>";return a+="</tr></thead></table>"},s=function(a){var e,g,h,b=n(a),c=o(a),d=Math.ceil((b+c)/7),f="";for(k=a.getFullYear(),l=a.getMonth(),e=new Date(k,l,1-b),f+="<table><tbody>",g=0;d>g;g++){for(f+="<tr>",h=0;7>h;h++)f+=t(e,l),e.setDate(e.getDate()+1);f+="</tr>"}return f+="</tbody></table>"},t=function(a,b){var c=a.getMonth()!==b,d=e.format(a),f=e.format(e.settings.date)==d?"active":"",g=a.getDate();return e.settings.onRenderDay&&(g=e.settings.onRenderDay.call(null,g,d)),c?"<td>&nbsp;</td>":'<td data-selected="selected" class="'+f+'" data-date= '+d+">"+g+"</td>"},u=function(){var b,c;f.on("click",function(d){if(b=a(d.target),b.is("[data-year].next")?(j.setFullYear(j.getFullYear()+1),e.refresh(j)):b.is("[data-year].previous")?(j.setFullYear(j.getFullYear()-1),e.refresh(j)):b.is("[data-month].next")?(j.setMonth(j.getMonth()+1),e.refresh(j)):b.is("[data-month].previous")&&(j.setMonth(j.getMonth()-1),e.refresh(j)),c=b.closest("td"),!b.is("td")&&c.length>0&&(b=c),b.is("td")){var f=b.data("date");f&&e.settings.onSelect&&e.settings.onSelect.call(e,f)}}),f.on("swipeLeft",function(){j.setMonth(j.getMonth()+1),e.refresh(j)}),f.on("swipeRight",function(){j.setMonth(j.getMonth()-1),e.refresh(j)})};this.refresh=function(a){var f,b=new Date(k,l,1),c=new Date(a.getFullYear(),a.getMonth(),1),d=void 0;b.getTime()!=c.getTime()&&(d=c>b?"slideLeftRound":"slideRightRound",g.text(a.getFullYear()),h.text(this.settings.months[a.getMonth()]),f=s(a),J.anim(i,d,function(){i.html(f)}))},m()};b.prototype.parse=function(a){var b=/^(\d{4})(?:\-|\/)(\d{1,2})(?:\-|\/)(\d{1,2})$/;return b.test(a)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null},b.prototype.format=function(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return c=10>c?"0"+c:c,d=10>d?"0"+d:d,b+"-"+c+"-"+d},J.Calendar=b}(J.$),function(a){var b={},c=1;J.Scroll=function(d,e){var f,g,h=a(d),i={hScroll:!1,bounce:!1,lockDirection:!0,useTransform:!0,useTransition:!1,checkDOMChanges:!1,hideScrollbar:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}};return g=h.data("_jscroll_"),g&&b[g]?(f=b[g],a.extend(f.scroller.options,e),f.scroller.refresh(),f):(g="_jscroll_"+c++,h.data("_jscroll_",g),a.extend(i,e),scroller=new iScroll(h[0],i),b[g]={scroller:scroller,destroy:function(){scroller.destroy(),delete b[g]}})}}(J.$),function(a){function b(b,c){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,d=function(){},e=function(){return!0},f=!1,g=0,h=200;interval=0,q=this,a.isPlainObject(b)?(i=a(b.selector),c=b.showDots,e=b.onBeforeSlide||e,d=b.onAfterSlide||d,p=b.autoPlay,interval=b.interval||3e3):i=a(b),r=function(){return k=i.children().first(),l=k.children(),(m=l.length)?(n=i.offset().width,k.css("width",m*n),l.css({width:n,"float":"left"}).show(),void 0==c&&(c=!0),c&&t(),u(0,0),d(0),p&&s(),void 0):!1},s=function(){setTimeout(function(){g==m-1?u(0):q.next(),s()},interval)},t=function(){var b,c,d;if(j=i.find(".dots"),j.length>0)j.show();else{for(b=20*m+20+2,c='<div class="dots"><ul>',d=0;m>d;d++)c+='<li index="'+d+'"',0==d&&(c+='class="active"'),c+='><a href="#"></a></li>';c+="</ul></div>",i.append(c),j=i.find(".dots"),j.children().css("width",b+"px"),j.find("li").on("click",function(){var b=a(this).attr("index");u(parseInt(b),h)})}},u=function(b,c){c=c||h,k.css({"-webkit-transition-duration":c+"ms","-webkit-transform":"translate3D("+-(b*n)+"px,0,0)"}),g!=b&&(g=b,j&&a(j.find("li").get(g)).addClass("active").siblings().removeClass("active"),d(g))},v=function(){k.on("touchstart",w,!1),k.on("touchmove",x,!1),k.on("touchend",y,!1)},w=function(a){var b=a.touches[0];start={pageX:b.pageX,pageY:b.pageY,time:Number(new Date)},isScrolling=void 0,o=0,k[0].style.webkitTransitionDuration=0,f=!0},x=function(a){var b,c,d;if(f&&(b=a.touches[0],o=b.pageX-start.pageX,"undefined"==typeof isScrolling&&(isScrolling=Math.abs(o)<Math.abs(b.pageY-start.pageY)),!isScrolling)){if(a.preventDefault(),c=!g&&o>0||g==m-1&&0>o)return;d=o-g*n,k[0].style.webkitTransform="translate3D("+d+"px,0,0)"}},y=function(){var b=Number(new Date)-start.time<250&&Math.abs(o)>20||Math.abs(o)>n/3,c=!g&&o>0||g==m-1&&0>o;isScrolling||(e(g,o)?u(g+(b&&!c?0>o?1:-1:0),h):u(g)),f=!1},r(),v(),this.refresh=function(){k.attr("style",""),r()},this.prev=function(){g&&u(g-1,h)},this.next=function(){m-1>g&&u(g+1,h)},this.index=function(a){u(a)}}J.Slider=b}(J.$),function(a){function d(b,c,d){var e,f,g,h,i,j,k,m,n,l={selector:void 0,type:"pullDown",minPullHeight:10,pullText:"下拉刷新...",releaseText:"松开立即刷新...",refreshText:"刷新中...",refreshTip:!1,onPullIcon:"icon-e61c",onReleaseIcon:"icon-e620",onRefreshIcon:"icon-e982",callback:void 0};return"object"==typeof b?a.extend(l,b):(l.selector=b,l.type=c,l.callback=d,"pullUp"===c&&a.extend(l,{pullText:"上拉加载更多...",releaseText:"松开开立即加载...",refreshText:"加载中...",onPullIcon:"icon-e61c"})),k="pullDown"===l.type?!0:!1,m=function(b){f=a(b.selector).children()[0];var c='<div class="refresh-container f-asbestos"><span class="refresh-icon '+b.onPullIcon+'"></span><span class="refresh-label">'+b.pullText+"</span>"+(b.refreshTip?'<div class="refresh-tip">'+b.refreshTip+"</div>":"")+"</div>";g=k?a(c).prependTo(f):a(c).appendTo(f),j=g.height(),h=g.find(".refresh-icon"),i=g.find(".refresh-label")},n=function(a){return J.Scroll(a.selector,{topOffset:k?j:0,bounce:!0,onScrollMove:function(){this.y>a.minPullHeight&&k&&!h.hasClass(a.onReleaseIcon)?(h.addClass(a.onReleaseIcon),i.html(a.releaseText),this.minScrollY=0):this.y<a.minPullHeight&&k&&h.hasClass(a.onReleaseIcon)?(h.removeClass(a.onReleaseIcon),i.html(a.pullText),this.minScrollY=-j):this.y<this.maxScrollY-a.minPullHeight&&!k&&!h.hasClass(a.onReleaseIcon)?(h.addClass(a.onReleaseIcon),i.html(a.releaseText),this.maxScrollY=this.maxScrollY):this.y>this.maxScrollY+a.minPullHeight&&!k&&h.hasClass(a.onReleaseIcon)&&(h.removeClass(a.onReleaseIcon),i.html(a.pullText),this.maxScrollY=j)},onScrollEnd:function(){if(h.hasClass(a.onReleaseIcon)){h.removeClass(a.onReleaseIcon).removeClass(a.onPullIcon).addClass(a.onRefreshIcon),i.html(a.refreshText);var b=this;setTimeout(function(){a.callback.call(b)},1)}},onRefresh:function(){h.removeClass(a.onRefreshIcon).addClass(a.onPullIcon),i.html(a.pullText)}})},m(l),e=n(l)}var b={},c=1;J.Refresh=function(e,f,g){var h,i,j;return h=e.selector?a(e.selector):a(e),i=h.data("_jrefresh_"),i&&b[i]?b[i]:(i="_jrefresh_"+c++,h.data("_jrefresh_",i),j=new d(e,f,g),b[i]={scroller:j.scroller,destroy:function(){delete b[i],j.scroller.destroy(),a(".refresh-container",e).remove()}})}}(J.$); 